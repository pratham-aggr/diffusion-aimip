# @package _global_

# to execute this experiment run:
# python run.py experiment=climatebench_daily
# To run it with the modified datamodule, run:
# python run.py experiment=climatebench_daily datamodule=climatebench_daily_modified
defaults:
  - climatebench.yaml
  - override /datamodule: climatebench_daily.yaml
  - _self_

name: "CB-Daily"



datamodule:
  window: 1 # no window since the granularity is daily (for now)
  num_workers: 16

model:
  loss_function: "wmse"
  dropout: 0.2  # Increased from 0.1 for better regularization

module:
  allow_validation_size_indivisible_on_ddp: True
  # Pr Clamping Parameters
  pr_clamping: True # If True, will clamp the precipitation values to be non-negative
  pr_clamping_threshold: 5e-10 # Minimum value for precipitation clamping
  # EMA (Exponential Moving Average) settings
  use_ema: True  # Enable EMA for better model stability
  ema_decay: 0.9999  # EMA decay rate
  # Optimizer settings
  optimizer:
    lr: 5e-5  # Lowered from 1e-4 for more stable training

trainer:
  max_epochs: 20  # Train for longer (20 epochs instead of default)

callbacks:
  early_stopping:
    patience: 10  # Stop if no improvement for 10 epochs